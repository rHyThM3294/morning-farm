import{_,y as b,x as $,g as n,k as q,e as B,q as x,c as z,o as D,b as e,t as i,n as H,D as u,A as d,d as I}from"./index-C-iolDOv.js";import{u as A}from"./favorite-BSR18Ody.js";const F={class:"circlePicture"},E=["alt"],W={class:"cardBottom"},w={class:"name"},M={class:"unit"},R={class:"price"},V={class:"intoCartButton"},G={__name:"Card",props:{id:{type:String,required:!0},status:{type:String,default:"New"},productTitle:{type:String,required:!0},sellerName:{type:String,required:!0},unit:{type:String,required:!0},price:{type:[Number,String],required:!0},imageUrl:{type:String,default:"chinese-pear.png"},category:{type:String,default:"all"},stock:{type:Number,default:100},useHorizontal:{type:Boolean,default:!1}},emits:["toggleHeart"],setup(s,{emit:p}){const g=A(),o=b(),f=$(),y=p,t=s,r="/morning-farm/",h=`${r}image/chinese-pear.png`,v=n(()=>{const a=t.imageUrl;return a?/^https?:\/\//.test(a)||a.startsWith(`${r}image/`)?a:a.startsWith("/image/")||a.startsWith("image/")?`${r}${a.replace(/^\/+/,"")}`:`${r}image/${a}`:h}),N=`${r}image/頭貼.png`,l=q(!1),S=n(()=>g.isFavorited(t.id)),k=n(()=>S.value?"fa-solid fa-heart":"fa-regular fa-heart");function C(){l.value=!0,setTimeout(()=>l.value=!1,300);const a={id:t.id,status:t.status,productTitle:t.productTitle,sellerName:t.sellerName,unit:t.unit,price:t.price,imageUrl:t.imageUrl,category:t.category,stock:t.stock};g.toggle(a)?o.success("已加入最愛"):o.info("已取消最愛"),y("toggleHeart",a)}function T(){f.addItem({id:t.id,productTitle:t.productTitle,price:Number(t.price),imageUrl:t.imageUrl,sellerName:t.sellerName,unit:t.unit,category:t.category,stock:t.stock,quantity:1}),o.success("成功加入購物車！")}const U=B();x();function m(){U.push({name:"productDetail",params:{category:t.category||"all",id:t.id}})}return(a,c)=>(D(),z("div",{class:d(["commodityCard",{horizontal:s.useHorizontal}]),onClick:m},[e("div",{class:"cardUp",style:H({backgroundImage:`url(${v.value})`})},[e("p",null,i(s.status),1),e("div",F,[e("img",{src:N,alt:s.sellerName},null,8,E)])],4),e("div",W,[e("div",{class:"cardTitle",onClick:u(m,["stop"])},[e("h5",null,i(s.productTitle),1),e("button",{type:"button",class:d(["heart",{animate:l.value}]),onClick:u(C,["stop"])},[e("i",{class:d(k.value)},null,2)],2)]),e("p",w,i(s.sellerName),1),e("p",M,i(s.unit),1),e("h6",R,"NT$ "+i(s.price),1),e("div",V,[e("button",{class:"intoCart",onClick:u(T,["stop"])},[...c[0]||(c[0]=[I(" 加入購物車 ",-1),e("i",{class:"fa-solid fa-cart-shopping"},null,-1)])])])])],2))}},j=_(G,[["__scopeId","data-v-e41f0757"]]);export{j as C};

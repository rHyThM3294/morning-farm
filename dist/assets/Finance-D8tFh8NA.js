import{_ as g,k as v,g as y,h as M,l as A,E as k,c as f,o as i,b as s,t as _,A as x,N as U,a as h,u as F,F as T,r as N,j as K,B as V}from"./index-DojhYcG3.js";import{P as L}from"./Page-CI1u0eYB.js";/* empty css                                                             */const W={class:"donut-chart"},q={class:"donut-center"},z={class:"donut-center-value"},H={__name:"FinanceDonut",props:{net:Number,fee:Number},emits:["net-animation-complete"],setup(n,{emit:e}){const a=n,r=e,o=v(null),t=y(()=>a.net-a.fee),l=v(0),c=v("$0"),u=d=>"$"+Math.round(d).toLocaleString();M(p),A(()=>[a.net,a.fee],p);function p(){const d=a.net,m=a.fee,I=t.value,S=2*Math.PI*100,P=S*(m/d),C=o.value.querySelector(".donut-net"),w=o.value.querySelector(".donut-fee");k.set([C,w],{strokeDasharray:S,strokeDashoffset:S}),k.set(w,{opacity:0}),l.value=0,c.value="$0";const E=2,B=1.2,R=.5,$=k.timeline();$.to({},{duration:R}),$.to(C,{strokeDashoffset:0,duration:E,ease:"power2.out"}),$.to(l,{value:d,duration:E,onUpdate(){l.value=Math.round(l.value),c.value=u(l.value)},onComplete(){r("net-animation-complete")}},"<"),$.to(w,{opacity:1,duration:.2}),$.to(w,{strokeDashoffset:S-P,duration:B,ease:"power2.out"}),$.to(l,{value:I,duration:B,onUpdate(){l.value=Math.round(l.value),c.value=u(l.value)}},"<")}return(d,m)=>(i(),f("div",W,[s("div",q,[m[0]||(m[0]=s("div",{class:"donut-center-label"},"本月收入",-1)),s("div",z,_(c.value),1)]),(i(),f("svg",{width:"300",height:"300",viewBox:"0 0 300 300",ref_key:"svgRef",ref:o},[...m[1]||(m[1]=[s("circle",{class:"donut-bg",cx:"160",cy:"140",r:"100"},null,-1),s("circle",{class:"donut-net",cx:"160",cy:"140",r:"100"},null,-1),s("circle",{class:"donut-fee",cx:"160",cy:"140",r:"100"},null,-1)])],512))]))}},Y=g(H,[["__scopeId","data-v-f192e031"]]),j={class:"title"},O={__name:"FinanceStatCard",props:{title:String,type:String,value:Number,delay:{type:Number,default:0}},setup(n){const e=n,a=v(0),r=y(()=>"$"+Math.round(a.value).toLocaleString());function o(){a.value=0,k.to(a,{value:e.value,duration:2,ease:"power2.out",delay:e.delay,onUpdate:function(){a.value=this.targets()[0].value}})}return M(()=>{e.value!==void 0&&e.value!==null&&o()}),A(()=>e.value,t=>{t!=null&&o()}),(t,l)=>(i(),f("div",{class:x(["stat-card",n.type])},[s("p",j,_(n.title),1),s("h4",null,_(r.value),1)],2))}},G=g(O,[["__scopeId","data-v-7f891b1a"]]),J=U("finance",()=>{const n=v({net:63229,fee:3294}),e=v([{id:1,title:"今日收入",value:2325,type:"income"},{id:2,title:"累計總收入",value:588435,type:"income"},{id:3,title:"本月已撥款收入",value:62671,type:"income"},{id:4,title:"待撥款收入",value:2255,type:"income"}]),a=y(()=>[...e.value,{id:5,title:"本月退單金額",value:n.value.fee,type:"refund"}]),r=y(()=>n.value.net-n.value.fee),o=y(()=>n.value.net),t=y(()=>n.value.fee);function l(c){c.stats&&(e.value=c.stats.filter(u=>u.id!==5)),c.donut&&(n.value=c.donut)}return{stats:a,donut:n,netIncome:r,totalIncome:o,refundAmount:t,setFinanceFromApi:l}});function D(n,e){return Math.floor(Math.random()*(e-n+1))+n}function Q(){return String(D(1e9,9999999999))}function X(){const n=new Date("2025-12-01").getTime(),e=new Date("2026-03-31").getTime(),a=new Date(D(n,e)),r=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),t=String(a.getDate()).padStart(2,"0");return`${r}/${o}/${t}`}function Z(){const n=String(D(8,21)).padStart(2,"0"),e=String(D(0,59)).padStart(2,"0");return`${n}:${e}`}const tt=["信用卡","銀行轉帳","貨到付款"],et=["成功","失敗","退款"],nt=Array.from({length:100},()=>{const n=D(200,5e3),e=D(30,120),a=n-e;return{orderId:Q(),amount:n,paymentMethod:tt[D(0,2)],status:et[D(0,2)],shipping:e,netIncome:a,date:X(),time:Z()}}),at={class:"Summary"},st={class:"stat"},ot={__name:"FinanceSummary",setup(n){const e=J(),a=v(!1);function r(){a.value=!0}function o(t){return t>=1&&t<=4?.5:t===5?2.5:0}return(t,l)=>(i(),f("section",at,[h(Y,{net:F(e).donut.net,fee:F(e).donut.fee,onNetAnimationComplete:r},null,8,["net","fee"]),s("div",st,[(i(!0),f(T,null,N(F(e).stats,c=>(i(),K(G,{key:c.id,value:c.value,title:c.title,type:c.type,delay:o(c.id)},null,8,["value","title","type","delay"]))),128))])]))}},rt=g(ot,[["__scopeId","data-v-ff91cc1e"]]),lt={class:"dateRangePicker"},ct=["value"],ut=["value"],dt={__name:"DataRangePicker",props:{startDate:String,endDate:String},emits:["updateStart","updateEnd"],setup(n,{emit:e}){const a=e;return(r,o)=>(i(),f("div",lt,[s("input",{type:"date",class:"dateInput",value:n.startDate,onInput:o[0]||(o[0]=t=>a("updateStart",t.target.value))},null,40,ct),o[2]||(o[2]=s("span",{class:"rangeText"},"~",-1)),s("input",{type:"date",class:"dateInput",value:n.endDate,onInput:o[1]||(o[1]=t=>a("updateEnd",t.target.value))},null,40,ut)]))}},it=g(dt,[["__scopeId","data-v-f8cc766a"]]),pt={class:"keywordSearch"},vt=["value"],ft={__name:"KeywordSearch",props:{keyword:String},emits:["updateKeyword"],setup(n,{emit:e}){const a=e;return(r,o)=>(i(),f("div",pt,[s("input",{class:"searchInput",type:"text",placeholder:"輸入訂單編號...",value:n.keyword,onInput:o[0]||(o[0]=t=>a("updateKeyword",t.target.value))},null,40,vt)]))}},_t=g(ft,[["__scopeId","data-v-ee01039e"]]),mt={class:"exportWrapper"},yt={__name:"ExportButton",props:{records:Array},setup(n){const e=n;function a(){console.log("匯出資料:",e.records)}return(r,o)=>(i(),f("div",mt,[s("button",{class:"exportButton",onClick:a}," 匯出 ")]))}},gt=g(yt,[["__scopeId","data-v-3e4c0e18"]]),ht={class:"financeTable"},Dt={class:"tableScroll"},St={key:0,class:"empty"},$t=["onClick"],It={class:"cell"},wt={class:"cell"},kt={class:"cell"},Ft={class:"cell"},bt={class:"cell"},xt={class:"cell"},Ct={class:"cell"},Et={__name:"FinanceTable",props:{records:{type:Array,default:()=>[]}},setup(n){const e=v(null);function a(r){return{success:r==="成功",fail:r==="失敗",refund:r==="退款"}}return(r,o)=>(i(),f("div",ht,[s("div",Dt,[o[0]||(o[0]=s("div",{class:"tableHeader"},[s("span",null,"訂單編號"),s("span",null,"金額"),s("span",null,"付款方式"),s("span",null,"狀態"),s("span",null,"運費"),s("span",null,"淨收入"),s("span",null,"日期"),s("span",null,"時間")],-1)),n.records.length===0?(i(),f("p",St,"目前沒有資料")):V("",!0),(i(!0),f(T,null,N(n.records,t=>(i(),f("div",{key:t.orderId,class:x(["rowCard",{active:t.orderId===e.value}]),onClick:l=>e.value=t.orderId},[s("div",It,_(t.orderId),1),s("div",wt,"$"+_(t.amount),1),s("div",kt,_(t.paymentMethod),1),s("div",{class:x(["cell",a(t.status)])},_(t.status),3),s("div",Ft,"$"+_(t.shipping),1),s("div",bt,"$"+_(t.netIncome),1),s("div",xt,_(t.date),1),s("div",Ct,_(t.time),1)],10,$t))),128))]),o[1]||(o[1]=s("div",{class:"scrollHint"},[s("span",{class:"hintArrow"},"⇆"),s("span",{class:"hintText"},"左右滑動查看更多欄位")],-1))]))}},Bt=g(Et,[["__scopeId","data-v-96374577"]]),Mt={class:"filterBlock"},At={class:"filter"},Tt={class:"tableWrapper"},b=9,Nt={__name:"FinanceFilterBar",props:{keyword:String,startDate:String,endDate:String},emits:["updateKeyword","updateStart","updateEnd"],setup(n){const e=n,a=v(1),r=v(null),o=y(()=>nt.filter(u=>{const p=e.keyword?u.orderId.includes(e.keyword):!0,d=new Date(u.date),m=e.startDate?new Date(e.startDate):null,I=e.endDate?new Date(e.endDate):null,S=(!m||d>=m)&&(!I||d<=I);return p&&S})),t=y(()=>Math.ceil(o.value.length/b)||1),l=y(()=>{const u=(a.value-1)*b;return o.value.slice(u,u+b)});function c(u){a.value=u,r.value&&r.value.getBoundingClientRect().top<0&&r.value.scrollIntoView({behavior:"smooth",block:"start"})}return(u,p)=>(i(),f("section",{class:"financeFilterBar",ref_key:"filterBarRef",ref:r},[s("div",Mt,[s("div",At,[h(it,{startDate:n.startDate,endDate:n.endDate,onUpdateStart:p[0]||(p[0]=d=>u.$emit("updateStart",d)),onUpdateEnd:p[1]||(p[1]=d=>u.$emit("updateEnd",d))},null,8,["startDate","endDate"]),h(_t,{keyword:n.keyword,onUpdateKeyword:p[2]||(p[2]=d=>u.$emit("updateKeyword",d))},null,8,["keyword"])]),h(gt,{records:o.value},null,8,["records"])]),s("div",Tt,[h(Bt,{records:l.value},null,8,["records"])]),h(L,{totalPages:t.value,modelValue:a.value,"onUpdate:modelValue":p[3]||(p[3]=d=>a.value=d),onPageChanged:c},null,8,["totalPages","modelValue"])],512))}},Pt=g(Nt,[["__scopeId","data-v-bab0567d"]]),Rt={class:"finance"},Ut={__name:"Finance",setup(n){const e=v(""),a=v(""),r=v("");return v([]),(o,t)=>(i(),f("section",Rt,[h(rt),h(Pt,{keyword:e.value,startDate:a.value,endDate:r.value,onUpdateKeyword:t[0]||(t[0]=l=>e.value=l),onUpdateStart:t[1]||(t[1]=l=>a.value=l),onUpdateEnd:t[2]||(t[2]=l=>r.value=l)},null,8,["keyword","startDate","endDate"])]))}},Wt=g(Ut,[["__scopeId","data-v-251d5212"]]);export{Wt as default};

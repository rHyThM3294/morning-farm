import{u as x}from"./order-Ca1Nyb6b.js";import{_ as g,c as u,o as r,b as e,A as f,d as V,B as h,t as l,F as T,r as C,y as S,g as v,n as B,e as W,k as I,l as D,a as w,j as N,I as O}from"./index-Cl32RTfK.js";import"./product-CFknvtDj.js";const L={class:"withdrawToggle"},F=["disabled"],R={key:0,class:"count"},U=["disabled"],j={__name:"WithdrawToggle",props:{modelValue:{type:String,default:"pending"},pendingCount:{type:Number,default:void 0}},emits:["update:modelValue"],setup(t,{emit:i}){const o=t,n=i;function d(c){c!==o.modelValue&&n("update:modelValue",c)}return(c,a)=>(r(),u("div",L,[e("span",{class:f(["slider",t.modelValue])},null,2),e("button",{type:"button",class:f(["toggleButton",{active:t.modelValue==="pending"}]),onClick:a[0]||(a[0]=m=>d("pending")),disabled:t.modelValue==="pending"},[a[2]||(a[2]=V(" 待退訂單 ",-1)),t.pendingCount!==void 0?(r(),u("span",R," ("+l(t.pendingCount)+") ",1)):h("",!0)],10,F),e("button",{type:"button",class:f(["toggleButton",{active:t.modelValue==="done"}]),onClick:a[1]||(a[1]=m=>d("done")),disabled:t.modelValue==="done"}," 已退訂單 ",10,U),e("span",{class:f(["indicator",t.modelValue])},null,2)]))}},z=g(j,[["__scopeId","data-v-9ac6ee52"]]),A={class:"withdrawList"},M={class:"listHeader"},P={key:0,class:"empty"},q=["onClick"],E={class:"orderText"},H={class:"orderNumber"},G={class:"orderText"},J={class:"label"},K={class:"orderTime"},Q={class:"orderText"},X={class:"because"},Y={class:"orderText"},Z={class:"method"},ee={__name:"WithdrawList",props:{status:String,orders:Array,activeId:String},emits:["select"],setup(t,{emit:i}){return(o,n)=>(r(),u("div",A,[e("div",M,[n[0]||(n[0]=e("span",null,"訂單編號",-1)),e("span",null,l(t.status==="pending"?"截止時間":"處理完成時間"),1),n[1]||(n[1]=e("span",null,"原因",-1)),n[2]||(n[2]=e("span",null,"處理方式",-1))]),t.orders.length===0?(r(),u("p",P,l(t.status==="pending"?"目前沒有待退訂單":"目前沒有已退訂單"),1)):h("",!0),(r(!0),u(T,null,C(t.orders,d=>(r(),u("div",{key:d.orderId,class:f(["orderCard",{active:d.orderId===t.activeId}]),onClick:c=>o.$emit("select",d)},[e("div",E,[n[3]||(n[3]=e("p",{class:"label"},"訂單編號",-1)),e("p",H,l(d.orderId),1)]),e("div",G,[e("p",J,l(t.status==="pending"?"截止時間":"完成時間"),1),e("p",K,l(t.status==="pending"?d.returnInfo.deadline:d.returnInfo.finishedTime),1)]),e("div",Q,[n[4]||(n[4]=e("p",{class:"label"},"退換原因",-1)),e("p",X,l(d.returnInfo.reason),1)]),e("div",Y,[n[5]||(n[5]=e("p",{class:"label"},"處理方式",-1)),e("p",Z,l(d.returnInfo.method),1)])],10,q))),128))]))}},te=g(ee,[["__scopeId","data-v-a753e034"]]),se={class:"withdrawDetail"},ne={class:"allDetail"},le={class:"withdrawDetailCard"},oe={class:"orderMessage"},de={class:"title"},ae={class:"detailContainer"},ie={class:"detailBox"},re={class:"allText"},ue={class:"productName"},ce={class:"text"},ve={class:"text"},me={class:"text"},fe={class:"text"},ge={key:0,class:"dealWith"},he={class:"buyerMessage"},pe={class:"detailContainer"},_e={class:"allText"},be={class:"text"},Ie={class:"text"},$e={class:"text"},ke={class:"text"},we={__name:"WithdrawDetail",props:{order:{type:Object,required:!0}},emits:["done"],setup(t,{emit:i}){const o=t;W();const n=x(),d=S(),c=i,a=v(()=>o.order.returnInfo.status==="pending"),m=v(()=>a.value?o.order.returnInfo.deadline:o.order.returnInfo.finishedTime),p=v(()=>new URL("/morning-farm/image/chinese-pear.png",import.meta.url).href);function _(){confirm("點擊確認後將由專人審核，確實退貨處理完畢方可結案。")&&(n.finishReturn(o.order.orderId),d.success("退貨處理完成"),c("done"))}return(b,s)=>(r(),u("div",se,[e("div",ne,[e("div",le,[e("div",oe,[e("div",de,[e("h6",null,"訂單編號 "+l(t.order.orderId),1)]),e("div",ae,[e("div",{class:"productPicture",style:B({backgroundImage:`url(${p.value})`})},null,4),e("div",ie,[e("div",re,[e("h6",ue,l(t.order.items[0].productName),1),e("div",ce,[e("label",null,l(a.value?"截止":"完成")+"時間： ",1),e("p",null,l(m.value),1)]),e("div",ve,[s[0]||(s[0]=e("label",null,"退貨原因：",-1)),e("p",null,l(t.order.returnInfo.reason),1)]),e("div",me,[s[1]||(s[1]=e("label",null,"處理方式：",-1)),e("p",null,l(t.order.returnInfo.method),1)]),e("div",fe,[s[2]||(s[2]=e("label",null,"運送地址：",-1)),e("p",null,l(t.order.address),1)])]),a.value?(r(),u("div",ge,[e("button",{type:"button",onClick:_},"確定處理")])):h("",!0)])])]),e("div",he,[s[7]||(s[7]=e("div",{class:"title"},[e("p",null,"買家資訊")],-1)),e("div",pe,[e("div",_e,[e("div",be,[s[3]||(s[3]=e("label",null,"姓名：",-1)),e("p",null,l(t.order.buyer),1)]),e("div",Ie,[s[4]||(s[4]=e("label",null,"電話：",-1)),e("p",null,l(t.order.telephone||"—"),1)]),e("div",$e,[s[5]||(s[5]=e("label",null,"手機：",-1)),e("p",null,l(t.order.phone),1)]),e("div",ke,[s[6]||(s[6]=e("label",null,"電子信箱：",-1)),e("p",null,l(t.order.email),1)])])])])])])]))}},xe=g(we,[["__scopeId","data-v-eb388e27"]]),ye={class:"withdraw"},Ve={__name:"Withdraw",setup(t){const i=I("pending"),o=I(null),n=I(null),d=x(),c=v(()=>d.orders),a=v(()=>c.value.filter(s=>s.returnInfo)),m=v(()=>a.value.filter(s=>s.returnInfo.status==="pending")),p=v(()=>a.value.filter(s=>s.returnInfo.status==="done"));async function _(s){o.value=s,await O(),n.value.scrollIntoView({behavior:"smooth",block:"start"})}D(i,()=>{o.value=null});function b(){o.value=null,i.value="done"}return(s,$)=>{var k;return r(),u("div",ye,[w(z,{modelValue:i.value,"onUpdate:modelValue":$[0]||($[0]=y=>i.value=y)},null,8,["modelValue"]),w(te,{status:i.value,orders:i.value==="pending"?m.value:p.value,activeId:(k=o.value)==null?void 0:k.orderId,onSelect:_},null,8,["status","orders","activeId"]),e("div",{ref_key:"detailBlock",ref:n},[o.value?(r(),N(xe,{key:0,order:o.value,onDone:b},null,8,["order"])):h("",!0)],512)])}}},Be=g(Ve,[["__scopeId","data-v-69a8af7e"]]);export{Be as default};

import{_ as w,y as V,g as y,k,c as o,o as i,b as t,B as u,D as T,t as r,d as F,F as I,r as P,A as M,u as j,j as q,m as z}from"./index-DczsYwvi.js";import{u as N}from"./adminProduct-kvWxbLLm.js";const H={class:"card"},R={key:0,class:"state"},U=["src"],G={class:"productTitle"},J={class:"tag"},K={class:"firstTag"},Q={key:0,class:"secondTag"},W={class:"farmerName"},Y={class:"unit"},Z={key:0,class:"supplies"},tt={key:1,class:"originalPrice"},et={class:"lastSeries"},st={class:"price"},at=["src"],it={class:"thumbRow"},ot=["onClick"],nt=["src"],_="/image/chinese-pear.png",ct={__name:"AdminCard",props:{id:{type:[String,Number],required:!0},status:{type:String,default:"New"},productTitle:{type:String,default:"未命名商品"},productTag:{type:String,default:""},subTag:{type:String,default:""},farmerName:{type:String,default:""},unit:{type:String,default:""},originalPrice:{type:Number,default:0},price:{type:Number,default:0},isOutOfStock:{type:Boolean,default:!1},imageList:{type:Array,default:()=>[]}},emits:["edit"],setup(s,{emit:g}){const h=N(),f=V(),a=s,d=g,b=y(()=>a.imageList&&a.imageList.length>0?a.imageList[0]:_),l=y(()=>a.imageList&&a.imageList.length>0?a.imageList:[_]),v=k(!1),c=k(0),S=k(0),L=y(()=>l.value[c.value]||_),B=()=>{v.value=!0,c.value=0},x=()=>{v.value=!1},A=e=>{c.value=e},E=()=>{const e=l.value.length;e<=1||(c.value=(c.value+1)%e)},O=()=>{const e=l.value.length;e<=1||(c.value=(c.value-1+e)%e)},X=e=>{!e.touches||!e.touches.length||(S.value=e.touches[0].clientX)},$=e=>{if(!e.changedTouches||!e.changedTouches.length)return;const m=e.changedTouches[0].clientX-S.value;Math.abs(m)<30||(m<0?E():O())},C=()=>{d("edit",a.id)},D=()=>{window.confirm(`確定要刪除這個商品嗎?
此動作無法復原。`)&&(h.deleteProduct(a.id),f.success("商品已刪除"))};return console.log("AdminCard imageList:",a.imageList),(e,n)=>(i(),o("div",H,[t("button",{type:"button",class:"deleteIcon",onClick:T(D,["stop"]),"aria-label":"刪除商品"},[...n[1]||(n[1]=[t("i",{class:"fa-solid fa-xmark"},null,-1)])]),t("div",{class:"cardUp",onClick:B},[s.status?(i(),o("div",R,r(s.status),1)):u("",!0),t("img",{src:b.value,alt:"商品圖片"},null,8,U),n[2]||(n[2]=t("div",{class:"hoverHint"},"點擊預覽圖片",-1))]),t("div",{class:"cardBottom",onClick:C},[t("h5",G,r(s.productTitle),1),t("div",J,[t("p",K,r(s.productTag),1),s.subTag?(i(),o("p",Q,"/"+r(s.subTag),1)):u("",!0)]),t("p",W,r(s.farmerName),1),t("p",Y,"1"+r(s.unit),1),s.isOutOfStock?(i(),o("p",Z,"(補貨中)")):u("",!0),s.originalPrice&&s.originalPrice>s.price?(i(),o("p",tt," NT$ "+r(s.originalPrice),1)):u("",!0),t("div",et,[t("h6",st,"NT$ "+r(s.price),1),t("button",{type:"button",class:"inToEddit",onClick:T(C,["stop"])},[...n[3]||(n[3]=[F(" 進入編輯 ",-1),t("i",{class:"fa-solid fa-angles-right"},null,-1)])])])]),v.value?(i(),o("div",{key:0,class:"previewOverlay",onClick:x},[t("div",{class:"previewDialog",onClick:n[0]||(n[0]=T(()=>{},["stop"]))},[t("img",{class:"previewImage",src:L.value,alt:"預覽圖片",onTouchstart:X,onTouchend:$},null,40,at),t("div",it,[(i(!0),o(I,null,P(l.value,(m,p)=>(i(),o("button",{key:p,type:"button",class:M(["thumbItem",{activeThumb:p===c.value}]),onClick:dt=>A(p)},[t("img",{src:m,alt:"商品縮圖"},null,8,nt)],10,ot))),128))])])])):u("",!0)]))}},rt=w(ct,[["__scopeId","data-v-55ff5963"]]),lt={class:"commodityList"},ut={__name:"Commodity",emits:["edit-product"],setup(s,{emit:g}){const h=N(),f=g;function a(d){f("edit-product",d)}return(d,b)=>(i(),o("div",lt,[(i(!0),o(I,null,P(j(h).products,l=>(i(),q(rt,z({key:l.id},{ref_for:!0},l,{onEdit:a}),null,16))),128))]))}},ht=w(ut,[["__scopeId","data-v-ab13c100"]]);export{ht as default};

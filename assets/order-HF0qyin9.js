import{N as k,k as T}from"./index-CqaD9CKL.js";import{u as F}from"./product-PuhTj7SY.js";const A=k("order",()=>{const e=F().allProducts,d=["unpaid","toShip","delivered","pickedUp","cancelled","returned"],u=["包裝破損","商品短少","商品瑕疵","商品有誤"],l={商品短少:["補商品","退款","換貨"],包裝破損:["退款","換貨"],商品瑕疵:["退款","換貨"],商品有誤:["退款","換貨"]},a=T(O()),h=T([]);function b(r){const t=a.value.find(c=>c.orderId===r);return t?(t.status="cancelled",!0):!1}function w(r){const t=a.value.find(c=>c.orderId===r);!t||!t.returnInfo||(t.returnInfo.status="done",t.returnInfo.finishedTime=q())}function N(r){if(r.type==="orderId"&&(h.value=a.value.filter(t=>t.orderId.includes(r.keyword))),r.type==="date"){const t=$(r.start),c=$(r.end);h.value=a.value.filter(i=>i.date>=t&&i.date<=c)}}function $(r){return r?R(r):""}function O(){return e.length?Array.from({length:50},(r,t)=>{const c=t%3+1,i=[];let M=0;for(let o=0;o<c;o++){const s=e[(t+o)%e.length],f=o%3+1,P=s.price*f;i.push({productId:s.id,productName:s.productTitle,sellerName:s.sellerName,unit:s.unit,price:s.price,quantity:f,subtotal:P}),M+=P}const D=["信用卡扣款","超商繳費","貨到付款","現場自取"],I=D[t%D.length];let m="",p=0;if(I==="現場自取")m="現場自取",p=0;else{const o=["宅配到府","超商取貨"];m=o[t%o.length],p=120}const S=t%4===0,y=S&&t%2===0;let v=null;if(S){const o=u[Math.floor(Math.random()*u.length)],s=l[o],f=s[Math.floor(Math.random()*s.length)];v={status:y?"pending":"done",reason:o,method:f,applyTime:`${g(t-1)} 18:30`,deadline:y?`${g(t+2)} 23:59`:null,finishedTime:y?null:`${g(t)} 14:20`}}return{id:t+1,orderId:Y(t),buyer:`買家${t+1}`,phone:`09${Math.floor(1e7+Math.random()*89999999)}`,telephone:"",email:`buyer${t+1}@example.com`,date:g(t),payTime:t%2===0?g(t-1):null,status:S?"returned":d[t%d.length],isPaid:t%2===0,payMethod:I,shippingMethod:m,address:t%3===2?"現場自取":`臺東縣中正區振興路 ${t+1} 號`,items:i,freight:p,total:M+p,returnInfo:v,remark:t%4===0?"請下午再送":"",productImage:"/image/chinese-pear.png"}}):[]}return{orders:a,searchResult:h,searchOrders:N,cancelOrder:b,finishReturn:w}});function g(n){const e=new Date;return e.setDate(e.getDate()-n),R(e)}function Y(n){const e=new Date,d=e.getFullYear(),u=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),a=String(n%99+1).padStart(2,"0");return`${d}${u}${l}${a}`}function R(n=new Date){const e=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),u=String(n.getDate()).padStart(2,"0");return`${e}-${d}-${u}`}function q(n=new Date){const e=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),u=String(n.getDate()).padStart(2,"0"),l=String(n.getHours()).padStart(2,"0"),a=String(n.getMinutes()).padStart(2,"0");return`${e}-${d}-${u} ${l}:${a}`}export{A as u};
